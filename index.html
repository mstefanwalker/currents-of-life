<!doctype html>
<html>
    <head>
        <title>Blue</title>
        <link rel="icon" href="/favicon.ico">
        <link rel="stylesheet" type="text/css" href="normalize.css">
        <style>
            body {
                overflow: hidden;
            }
            canvas {
                width: 100%;
            }
        </style>
        <script src="https://pixijs.download/release/pixi.min.js"></script>
    </head>
    <body>
        <script>
            const background = 0x0f2059
            const fishColor = 0xa60ab

            const app = new PIXI.Application({
                resizeTo: window,
                antialias: true,
                hello: true,
            })
            const width = app.screen.width
            const height = app.screen.height
            app.renderer.background.color = 0x0f2059
            document.body.appendChild(app.view)

            const fishes = []

            for (let i = 0; i < 50; i++) {
                const position = {
                    x: Math.random() * width,
                    y: Math.random() * height,
                    a: Math.random() * 360,
                }
                const fish = createFish(position)
                fishes.push(fish)
                app.stage.addChild(fish)
            }

            let elapsed = 0.0
            app.ticker.add((delta) => {
                elapsed += delta
                for (let fish of fishes) {
                    fish.angle += cos(elapsed)
                }
            })

            function cos(elapsed) {
                return Math.cos(elapsed/30)
            }

            function createFish(position) {
                const fish = new PIXI.Graphics()
                fish.beginFill(fishColor)
                fish.moveTo(0, 30)
                fish.quadraticCurveTo( 25, 0, 0, -30)
                fish.quadraticCurveTo(-25, 0, 0,  30)
                fish.endFill()
                fish.x = position.x
                fish.y = position.y
                fish.angle = position.a
                return fish
            }
        </script>
    </body>
</html>
